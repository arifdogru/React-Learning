{"version":3,"sources":["../../../src/core/config/db.js"],"names":["mongoose","plugin","schema","options","usePushEach","db","connect","config","mongoURL","useNewUrlParser","Promise","global","set","callback"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA;AACAA,mBAASC,MAAT,CAAgB,kBAAU;AACxBC,SAAOC,OAAP,CAAeC,WAAf,GAA6B,IAA7B;AACD,CAFD;;AAIA;;kBACe,oBAAY;AACzB,MAAIC,KAAKL,mBAASM,OAAT,CAAiBC,gBAAOC,QAAxB,EAAkC,EAACC,iBAAiB,IAAlB,EAAlC,CAAT;AACAT,qBAASU,OAAT,GAAmBC,OAAOD,OAA1B;AACAV,qBAASY,GAAT,CAAa,gBAAb,EAA+B,IAA/B;AACAZ,qBAASY,GAAT,CAAa,iBAAb,EAAgC,IAAhC;AACAZ,qBAASY,GAAT,CAAa,kBAAb,EAAiC,KAAjC;AACAZ,qBAASY,GAAT,CAAa,OAAb,EAAsB,IAAtB;AACAC,WAASR,EAAT;AACD,C","file":"db.js","sourcesContent":["import mongoose from \"mongoose\";\r\nimport config from \"./index\";\r\n\r\n// Turn usePushEach on for all models\r\nmongoose.plugin(schema => {\r\n  schema.options.usePushEach = true;\r\n});\r\n\r\n// return the database connection\r\nexport default callback => {\r\n  let db = mongoose.connect(config.mongoURL, {useNewUrlParser: true});\r\n  mongoose.Promise = global.Promise;\r\n  mongoose.set(\"useCreateIndex\", true);\r\n  mongoose.set(\"useNewUrlParser\", true);\r\n  mongoose.set(\"useFindAndModify\", false);\r\n  mongoose.set(\"debug\", true);\r\n  callback(db);\r\n};\r\n"]}